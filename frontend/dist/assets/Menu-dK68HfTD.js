import{d as e,o as a,c as l,a as t,k as i,l as r,r as u,E as d,n as o,h as s,b as n,t as c,q as p,A as v,B as m,_ as f}from"./index-D9a12nsq.js";const _={class:"menu-container"},h={class:"card-header"},y={class:"dialog-footer"},b=f(e({__name:"Menu",setup(e){const f=u([]),b=u(!1),V=u(null),w=u({id:"",name:"",description:"",price:0,is_active:!0}),g=u({name:[{required:!0,message:"请输入餐单名称",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}]}),k=()=>{w.value={id:"",name:"",description:"",price:0,is_active:!0},b.value=!0},x=async()=>{V.value&&await V.value.validate(async e=>{if(e)try{if(w.value.id){const e=f.value.findIndex(e=>e.id===w.value.id);-1!==e&&(f.value[e]={...w.value}),d.success("餐单更新成功")}else{const e={...w.value,id:f.value.length+1};f.value.push(e),d.success("餐单创建成功")}b.value=!1}catch(a){d.error("保存餐单失败")}})};return a(()=>{(async()=>{try{f.value=[{id:1,name:"基础月子餐",description:"适合产后第一周的基础调理餐",price:380,is_active:!0},{id:2,name:"进阶月子餐",description:"适合产后第二周的营养补充餐",price:420,is_active:!0},{id:3,name:"高级月子餐",description:"适合产后第三周的全面恢复餐",price:560,is_active:!0}]}catch(e){d.error("获取餐单列表失败")}})()}),(e,a)=>{const u=o("el-icon"),C=o("el-button"),U=o("el-table-column"),q=o("el-tag"),B=o("el-table"),I=o("el-card"),z=o("el-input"),T=o("el-form-item"),j=o("el-input-number"),A=o("el-switch"),D=o("el-form"),E=o("el-dialog");return s(),l("div",_,[a[12]||(a[12]=t("h2",null,"餐单管理",-1)),i(I,{shadow:"hover",class:"menu-card"},{header:r(()=>[t("div",h,[a[7]||(a[7]=t("span",null,"餐单列表",-1)),i(C,{type:"primary",onClick:k},{default:r(()=>[i(u,null,{default:r(()=>[i(p(v))]),_:1}),a[6]||(a[6]=n(" 新增餐单 ",-1))]),_:1})])]),default:r(()=>[i(B,{data:f.value,style:{width:"100%"}},{default:r(()=>[i(U,{prop:"id",label:"ID",width:"80"}),i(U,{prop:"name",label:"餐单名称"}),i(U,{prop:"description",label:"描述"}),i(U,{prop:"price",label:"价格",width:"100"}),i(U,{prop:"is_active",label:"状态",width:"100"},{default:r(e=>[i(q,{type:e.row.is_active?"success":"danger"},{default:r(()=>[n(c(e.row.is_active?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),i(U,{label:"操作",width:"150"},{default:r(e=>[i(C,{type:"primary",size:"small",onClick:a=>{return l=e.row,w.value={...l},void(b.value=!0);var l}},{default:r(()=>[...a[8]||(a[8]=[n(" 编辑 ",-1)])]),_:1},8,["onClick"]),i(C,{type:"danger",size:"small",onClick:a=>{return l=e.row.id,void m.confirm("确定要删除该餐单吗？","删除餐单",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{f.value=f.value.filter(e=>e.id!==l),d.success("餐单删除成功")}catch(e){d.error("删除餐单失败")}});var l}},{default:r(()=>[...a[9]||(a[9]=[n(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),i(E,{modelValue:b.value,"onUpdate:modelValue":a[5]||(a[5]=e=>b.value=e),title:"餐单管理",width:"500px"},{footer:r(()=>[t("span",y,[i(C,{onClick:a[4]||(a[4]=e=>b.value=!1)},{default:r(()=>[...a[10]||(a[10]=[n("取消",-1)])]),_:1}),i(C,{type:"primary",onClick:x},{default:r(()=>[...a[11]||(a[11]=[n("保存",-1)])]),_:1})])]),default:r(()=>[i(D,{model:w.value,rules:g.value,ref_key:"formRef",ref:V},{default:r(()=>[i(T,{label:"餐单名称",prop:"name"},{default:r(()=>[i(z,{modelValue:w.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.name=e),placeholder:"请输入餐单名称"},null,8,["modelValue"])]),_:1}),i(T,{label:"描述",prop:"description"},{default:r(()=>[i(z,{modelValue:w.value.description,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value.description=e),type:"textarea",placeholder:"请输入餐单描述"},null,8,["modelValue"])]),_:1}),i(T,{label:"价格",prop:"price"},{default:r(()=>[i(j,{modelValue:w.value.price,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value.price=e),min:0,step:.01,placeholder:"请输入价格"},null,8,["modelValue"])]),_:1}),i(T,{label:"状态"},{default:r(()=>[i(A,{modelValue:w.value.is_active,"onUpdate:modelValue":a[3]||(a[3]=e=>w.value.is_active=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-6e535a8f"]]);export{b as default};
