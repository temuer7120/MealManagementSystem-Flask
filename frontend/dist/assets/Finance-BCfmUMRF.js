import{d as a,o as l,c as e,a as t,b as n,H as s,I as i,f as o,w as u,r as c,g as d,h as r,t as p,S as f,i as v,k as m,v as b,_ as y}from"./index-DZYZqGXU.js";import{a as h}from"./index-B1ATcuf8.js";const g={class:"finance-container"},_={class:"card"},w={class:"card-header"},k={class:"card-body"},x={class:"table table-striped"},C=["onClick"],V=["onClick"],U={class:"form-group"},q={class:"form-group"},I={class:"form-group"},j={class:"form-group"},$={class:"dialog-footer"},D=y(a({__name:"Finance",setup(a){const y=c(!1),D=c(!1),F=c([]),H=c({id:null,type:"",amount:0,transaction_date:"",description:""});l(()=>{S()});const S=async()=>{try{const a=await h.get("/api/finances");F.value=a.data}catch(a){}},z=async()=>{try{D.value?await h.put(`/api/finances/${H.value.id}`,H.value):await h.post("/api/finances",H.value),y.value=!1,S()}catch(a){}};return(a,l)=>{const c=d("el-button"),A=d("el-dialog");return r(),e("div",g,[l[18]||(l[18]=t("h2",{class:"page-title"},[t("i",{class:"fas fa-money-bill-wave"}),n(" 财务管理 ")],-1)),t("div",_,[t("div",w,[t("button",{class:"btn btn-primary",onClick:l[0]||(l[0]=a=>y.value=!0)},[...l[7]||(l[7]=[t("i",{class:"fas fa-plus"},null,-1),n(" 添加财务记录 ",-1)])])]),t("div",k,[t("table",x,[l[10]||(l[10]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"交易类型"),t("th",null,"金额"),t("th",null,"交易日期"),t("th",null,"交易描述"),t("th",null,"操作")])],-1)),t("tbody",null,[(r(!0),e(s,null,i(F.value,a=>{return r(),e("tr",{key:a.id},[t("td",null,p(a.id),1),t("td",null,[t("span",{class:f(["badge",(s=a.type,"收入"===s?"bg-success text-white":"bg-danger text-white")])},p(a.type),3)]),t("td",null,p(a.amount)+" 元",1),t("td",null,p(a.transaction_date),1),t("td",null,p(a.description),1),t("td",null,[t("button",{class:"btn btn-sm btn-info",onClick:l=>(a=>{D.value=!0,H.value={...a},y.value=!0})(a)},[...l[8]||(l[8]=[t("i",{class:"fas fa-edit"},null,-1),n(" 编辑 ",-1)])],8,C),t("button",{class:"btn btn-sm btn-danger",onClick:l=>(async a=>{try{await h.delete(`/api/finances/${a}`),S()}catch(l){}})(a.id)},[...l[9]||(l[9]=[t("i",{class:"fas fa-trash"},null,-1),n(" 删除 ",-1)])],8,V)])]);var s}),128))])])])]),o(A,{modelValue:y.value,"onUpdate:modelValue":l[6]||(l[6]=a=>y.value=a),title:D.value?"编辑财务记录":"添加财务记录",width:"500px"},{footer:u(()=>[t("span",$,[o(c,{onClick:l[5]||(l[5]=a=>y.value=!1)},{default:u(()=>[...l[16]||(l[16]=[n("取消",-1)])]),_:1}),o(c,{type:"primary",onClick:z},{default:u(()=>[...l[17]||(l[17]=[n("保存",-1)])]),_:1})])]),default:u(()=>[t("div",U,[l[12]||(l[12]=t("label",{for:"finance-type"},"交易类型",-1)),v(t("select",{class:"form-control",id:"finance-type","onUpdate:modelValue":l[1]||(l[1]=a=>H.value.type=a),required:""},[...l[11]||(l[11]=[t("option",{value:""},"请选择交易类型",-1),t("option",{value:"收入"},"收入",-1),t("option",{value:"支出"},"支出",-1)])],512),[[m,H.value.type]])]),t("div",q,[l[13]||(l[13]=t("label",{for:"finance-amount"},"金额",-1)),v(t("input",{type:"number",class:"form-control",id:"finance-amount","onUpdate:modelValue":l[2]||(l[2]=a=>H.value.amount=a),required:"",step:"0.01"},null,512),[[b,H.value.amount]])]),t("div",I,[l[14]||(l[14]=t("label",{for:"finance-date"},"交易日期",-1)),v(t("input",{type:"date",class:"form-control",id:"finance-date","onUpdate:modelValue":l[3]||(l[3]=a=>H.value.transaction_date=a),required:""},null,512),[[b,H.value.transaction_date]])]),t("div",j,[l[15]||(l[15]=t("label",{for:"finance-description"},"交易描述",-1)),v(t("textarea",{class:"form-control",id:"finance-description","onUpdate:modelValue":l[4]||(l[4]=a=>H.value.description=a),rows:"3",required:""},null,512),[[b,H.value.description]])])]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-41cdcf41"]]);export{D as default};
