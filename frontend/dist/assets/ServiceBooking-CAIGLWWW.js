import{d as e,o as a,c as t,a as l,b as s,F as o,G as n,f as u,w as i,r,g as c,h as d,t as v,H as p,i as b,v as m,k as f,_ as g}from"./index-vc3lA8pl.js";import{a as _}from"./index-B1ATcuf8.js";const h={class:"service-booking-container"},k={class:"card"},y={class:"card-header"},w={class:"card-body"},x={class:"table table-striped"},V=["onClick"],C=["onClick"],U={class:"form-group"},q={class:"form-group"},j={class:"form-group"},I={class:"form-group"},$={class:"form-group"},B={class:"dialog-footer"},D=g(e({__name:"ServiceBooking",setup(e){const g=r(!1),D=r(!1),F=r([]),G=r({id:null,customer_name:"",service_type:"",booking_date:"",service_duration:0,status:""});a(()=>{H()});const H=async()=>{try{const e=await _.get("/api/service-bookings");F.value=e.data}catch(e){}},S=async()=>{try{D.value?await _.put(`/api/service-bookings/${G.value.id}`,G.value):await _.post("/api/service-bookings",G.value),g.value=!1,H(),z()}catch(e){}},z=()=>{G.value={id:null,customer_name:"",service_type:"",booking_date:"",service_duration:0,status:""},D.value=!1},A=e=>{switch(e){case"待确认":return"bg-warning text-white";case"已确认":return"bg-info text-white";case"已完成":return"bg-success text-white";case"已取消":return"bg-danger text-white";default:return"bg-secondary text-white"}};return(e,a)=>{const r=c("el-button"),z=c("el-dialog");return d(),t("div",h,[a[21]||(a[21]=l("h2",{class:"page-title"},[l("i",{class:"fas fa-calendar-check"}),s(" 服务预定 ")],-1)),l("div",k,[l("div",y,[l("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=e=>g.value=!0)},[...a[8]||(a[8]=[l("i",{class:"fas fa-plus"},null,-1),s(" 添加服务预定 ",-1)])])]),l("div",w,[l("table",x,[a[11]||(a[11]=l("thead",null,[l("tr",null,[l("th",null,"ID"),l("th",null,"客户名称"),l("th",null,"服务类型"),l("th",null,"预定日期"),l("th",null,"服务时长"),l("th",null,"状态"),l("th",null,"操作")])],-1)),l("tbody",null,[(d(!0),t(o,null,n(F.value,e=>(d(),t("tr",{key:e.id},[l("td",null,v(e.id),1),l("td",null,v(e.customer_name),1),l("td",null,v(e.service_type),1),l("td",null,v(e.booking_date),1),l("td",null,v(e.service_duration)+" 小时",1),l("td",null,[l("span",{class:p(["badge",A(e.status)])},v(e.status),3)]),l("td",null,[l("button",{class:"btn btn-sm btn-info",onClick:a=>(e=>{D.value=!0,G.value={...e},g.value=!0})(e)},[...a[9]||(a[9]=[l("i",{class:"fas fa-edit"},null,-1),s(" 编辑 ",-1)])],8,V),l("button",{class:"btn btn-sm btn-danger",onClick:a=>(async e=>{try{await _.delete(`/api/service-bookings/${e}`),H()}catch(a){}})(e.id)},[...a[10]||(a[10]=[l("i",{class:"fas fa-trash"},null,-1),s(" 删除 ",-1)])],8,C)])]))),128))])])])]),u(z,{modelValue:g.value,"onUpdate:modelValue":a[7]||(a[7]=e=>g.value=e),title:D.value?"编辑服务预定":"添加服务预定",width:"500px"},{footer:i(()=>[l("span",B,[u(r,{onClick:a[6]||(a[6]=e=>g.value=!1)},{default:i(()=>[...a[19]||(a[19]=[s("取消",-1)])]),_:1}),u(r,{type:"primary",onClick:S},{default:i(()=>[...a[20]||(a[20]=[s("保存",-1)])]),_:1})])]),default:i(()=>[l("div",U,[a[12]||(a[12]=l("label",{for:"customer-name"},"客户名称",-1)),b(l("input",{type:"text",class:"form-control",id:"customer-name","onUpdate:modelValue":a[1]||(a[1]=e=>G.value.customer_name=e),required:""},null,512),[[m,G.value.customer_name]])]),l("div",q,[a[14]||(a[14]=l("label",{for:"service-type"},"服务类型",-1)),b(l("select",{class:"form-control",id:"service-type","onUpdate:modelValue":a[2]||(a[2]=e=>G.value.service_type=e),required:""},[...a[13]||(a[13]=[l("option",{value:""},"请选择服务类型",-1),l("option",{value:"产后护理"},"产后护理",-1),l("option",{value:"新生儿护理"},"新生儿护理",-1),l("option",{value:"营养咨询"},"营养咨询",-1),l("option",{value:"其他服务"},"其他服务",-1)])],512),[[f,G.value.service_type]])]),l("div",j,[a[15]||(a[15]=l("label",{for:"booking-date"},"预定日期",-1)),b(l("input",{type:"date",class:"form-control",id:"booking-date","onUpdate:modelValue":a[3]||(a[3]=e=>G.value.booking_date=e),required:""},null,512),[[m,G.value.booking_date]])]),l("div",I,[a[16]||(a[16]=l("label",{for:"service-duration"},"服务时长（小时）",-1)),b(l("input",{type:"number",class:"form-control",id:"service-duration","onUpdate:modelValue":a[4]||(a[4]=e=>G.value.service_duration=e),required:""},null,512),[[m,G.value.service_duration]])]),l("div",$,[a[18]||(a[18]=l("label",{for:"status"},"状态",-1)),b(l("select",{class:"form-control",id:"status","onUpdate:modelValue":a[5]||(a[5]=e=>G.value.status=e),required:""},[...a[17]||(a[17]=[l("option",{value:""},"请选择状态",-1),l("option",{value:"待确认"},"待确认",-1),l("option",{value:"已确认"},"已确认",-1),l("option",{value:"已完成"},"已完成",-1),l("option",{value:"已取消"},"已取消",-1)])],512),[[f,G.value.status]])])]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-ade23975"]]);export{D as default};
