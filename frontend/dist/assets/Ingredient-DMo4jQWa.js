import{d as a,o as l,c as e,a as t,b as n,F as i,G as s,f as u,w as o,r as d,g as r,h as c,i as p,v,t as g,_ as m}from"./index-vc3lA8pl.js";import{a as f}from"./index-B1ATcuf8.js";const b={class:"ingredient-container"},y={class:"card"},h={class:"card-header"},k={class:"card-body"},_={class:"table table-striped"},x=["onClick"],C=["onClick"],V={class:"form-group"},w={class:"form-group"},U={class:"form-group"},q={class:"form-group"},I={class:"dialog-footer"},j=m(a({__name:"Ingredient",setup(a){const m=d(!1),j=d(!1),$=d([]),D=d({id:null,name:"",category:"",stock:0,unit:""});l(()=>{F()});const F=async()=>{try{const a=await f.get("/api/ingredients");$.value=a.data}catch(a){}},G=async()=>{try{j.value?await f.put(`/api/ingredients/${D.value.id}`,D.value):await f.post("/api/ingredients",D.value),m.value=!1,F(),z()}catch(a){}},z=()=>{D.value={id:null,name:"",category:"",stock:0,unit:""},j.value=!1};return(a,l)=>{const d=r("el-button"),z=r("el-dialog");return c(),e("div",b,[l[17]||(l[17]=t("h2",{class:"page-title"},[t("i",{class:"fas fa-seedling"}),n(" 食材管理 ")],-1)),t("div",y,[t("div",h,[t("button",{class:"btn btn-primary",onClick:l[0]||(l[0]=a=>m.value=!0)},[...l[7]||(l[7]=[t("i",{class:"fas fa-plus"},null,-1),n(" 添加食材 ",-1)])])]),t("div",k,[t("table",_,[l[10]||(l[10]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"食材名称"),t("th",null,"食材类别"),t("th",null,"库存数量"),t("th",null,"单位"),t("th",null,"操作")])],-1)),t("tbody",null,[(c(!0),e(i,null,s($.value,a=>(c(),e("tr",{key:a.id},[t("td",null,g(a.id),1),t("td",null,g(a.name),1),t("td",null,g(a.category),1),t("td",null,g(a.stock),1),t("td",null,g(a.unit),1),t("td",null,[t("button",{class:"btn btn-sm btn-info",onClick:l=>(a=>{j.value=!0,D.value={...a},m.value=!0})(a)},[...l[8]||(l[8]=[t("i",{class:"fas fa-edit"},null,-1),n(" 编辑 ",-1)])],8,x),t("button",{class:"btn btn-sm btn-danger",onClick:l=>(async a=>{try{await f.delete(`/api/ingredients/${a}`),F()}catch(l){}})(a.id)},[...l[9]||(l[9]=[t("i",{class:"fas fa-trash"},null,-1),n(" 删除 ",-1)])],8,C)])]))),128))])])])]),u(z,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=a=>m.value=a),title:j.value?"编辑食材":"添加食材",width:"500px"},{footer:o(()=>[t("span",I,[u(d,{onClick:l[5]||(l[5]=a=>m.value=!1)},{default:o(()=>[...l[15]||(l[15]=[n("取消",-1)])]),_:1}),u(d,{type:"primary",onClick:G},{default:o(()=>[...l[16]||(l[16]=[n("保存",-1)])]),_:1})])]),default:o(()=>[t("div",V,[l[11]||(l[11]=t("label",{for:"ingredient-name"},"食材名称",-1)),p(t("input",{type:"text",class:"form-control",id:"ingredient-name","onUpdate:modelValue":l[1]||(l[1]=a=>D.value.name=a),required:""},null,512),[[v,D.value.name]])]),t("div",w,[l[12]||(l[12]=t("label",{for:"ingredient-category"},"食材类别",-1)),p(t("input",{type:"text",class:"form-control",id:"ingredient-category","onUpdate:modelValue":l[2]||(l[2]=a=>D.value.category=a),required:""},null,512),[[v,D.value.category]])]),t("div",U,[l[13]||(l[13]=t("label",{for:"ingredient-stock"},"库存数量",-1)),p(t("input",{type:"number",class:"form-control",id:"ingredient-stock","onUpdate:modelValue":l[3]||(l[3]=a=>D.value.stock=a),required:""},null,512),[[v,D.value.stock]])]),t("div",q,[l[14]||(l[14]=t("label",{for:"ingredient-unit"},"单位",-1)),p(t("input",{type:"text",class:"form-control",id:"ingredient-unit","onUpdate:modelValue":l[4]||(l[4]=a=>D.value.unit=a),required:""},null,512),[[v,D.value.unit]])])]),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-2be95daf"]]);export{j as default};
